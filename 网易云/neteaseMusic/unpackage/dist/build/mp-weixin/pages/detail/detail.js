(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail","components/musichead/musichead"],{"0d2f":function(n,t,e){},"1a6b":function(n,t,e){"use strict";var a=e("0d2f"),i=e.n(a);i.a},4536:function(n,t,e){"use strict";var a;e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return a}));var i=function(){var n=this,t=n.$createElement;n._self._c},o=[]},"48a8":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={name:"musichead",props:["title","icon","color","iconblack"],data:function(){return{}},methods:{handleToBack:function(){n.navigateBack({})},handleToHome:function(){n.navigateTo({url:"../../pages/index/index"})}}};t.default=e}).call(this,e("543d")["default"])},8958:function(n,t,e){"use strict";e.r(t);var a=e("d0a2"),i=e.n(a);for(var o in a)"default"!==o&&function(n){e.d(t,n,(function(){return a[n]}))}(o);t["default"]=i.a},"92ae":function(n,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return a}));var a={musichead:function(){return Promise.resolve().then(e.bind(null,"e223"))}},i=function(){var n=this,t=n.$createElement,e=(n._self._c,n.__map(n.songComment,(function(t,e){var a=n.__get_orig(t),i=n._f("formatTime")(t.time),o=n._f("formatCount")(t.likedCount);return{$orig:a,f0:i,f1:o}})));n.$mp.data=Object.assign({},{$root:{l0:e}})},o=[]},a4de:function(n,t,e){"use strict";e.r(t);var a=e("48a8"),i=e.n(a);for(var o in a)"default"!==o&&function(n){e.d(t,n,(function(){return a[n]}))}(o);t["default"]=i.a},a5f9:function(n,t,e){"use strict";var a=e("ba20"),i=e.n(a);i.a},ba20:function(n,t,e){},ca6b:function(n,t,e){"use strict";(function(n){e("f757");a(e("66fd"));var t=a(e("f684"));function a(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},d0a2:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(e("e223"));var a=e("dac1");function i(n){return n&&n.__esModule?n:{default:n}}var o={data:function(){return{songDetail:{al:{picUrl:""},name:""},songSimi:[],songComment:[],songLyric:[],lyricIndex:0,iconPlay:"icon-zanting",isPlayRotate:!0,data:{},isloading:!0}},methods:{getMusic:function(t){var e=this;this.$store.commit("NEXT_ID",t),n.showLoading({title:"加载中..."}),this.isloading=!0,Promise.all([(0,a.getSongDetail)(t),(0,a.getSimi)(t),(0,a.getSongComment)(t),(0,a.getLyric)(t),(0,a.getSongUrl)(t)]).then((function(t){if(console.log(t),"200"==t[0][1].data.code&&(e.songDetail=t[0][1].data.songs[0]),"200"==t[1][1].data.code&&(e.songSimi=t[1][1].data.songs),"200"==t[2][1].data.code&&(e.songComment=t[2][1].data.hotComments),"200"==t[3][1].data.code){var a=t[3][1].data.lrc.lyric,i=[],o=/\[([^\]]+)\]([^\[]+)/g;a.replace(o,(function(n,t,a){i.push({time:e.formatTimeToSec(t),lyric:a})})),e.songLyric=i,console.log(i)}"200"==t[4][1].data.code&&(e.bgAudioManager=n.getBackgroundAudioManager(),e.bgAudioManager.title=e.songDetail.name,e.bgAudioManager.src=t[4][1].data.data[0].url||"",e.bgAudioManager.onPlay((function(){e.iconPlay="icon-zanting",e.isPlayRotate=!0,e.lyricRoll()})),e.bgAudioManager.onPause((function(){e.iconPlay="icon-bofang",e.isPlayRotate=!1,e.cancelLyricIndex()})),e.bgAudioManager.onEnded((function(){e.getMusic(e.$store.state.nextId)}))),e.isloading=!1,n.hideLoading()}))},formatTimeToSec:function(n){var t=n.split(":");return(Number(60*t[0])+Number(t[1])).toFixed(1)},handleToPlay:function(){this.bgAudioManager.paused?this.bgAudioManager.play():this.bgAudioManager.pause()},lyricRoll:function(){var n=this;clearInterval(this.timer),this.timer=setInterval((function(){for(var t=n.bgAudioManager.currentTime,e=0;e<n.songLyric.length;e++){if(e==n.songLyric.length-1){n.lyricIndex=n.songLyric.length-1;break}if(t>n.songLyric[e].time&&t<=n.songLyric[e+1].time){n.lyricIndex=e;break}}}),500)},cancelLyricIndex:function(){clearInterval(this.timer)},handleToSimi:function(n){this.getMusic(n)}},onLoad:function(n){this.getMusic(n.songId)},onUnload:function(){this.cancelLyricIndex()},onHide:function(){this.cancelLyricIndex()}};t.default=o}).call(this,e("543d")["default"])},e223:function(n,t,e){"use strict";e.r(t);var a=e("4536"),i=e("a4de");for(var o in i)"default"!==o&&function(n){e.d(t,n,(function(){return i[n]}))}(o);e("a5f9");var c,r=e("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"77834004",null,!1,a["a"],c);t["default"]=u.exports},f684:function(n,t,e){"use strict";e.r(t);var a=e("92ae"),i=e("8958");for(var o in i)"default"!==o&&function(n){e.d(t,n,(function(){return i[n]}))}(o);e("1a6b");var c,r=e("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"77605814",null,!1,a["a"],c);t["default"]=u.exports}},[["ca6b","common/runtime","common/vendor"]]]);